name: Container Image Release

# This workflow is triggered when semantic-release creates a new release
# It builds and pushes the Docker image with the release version tag

on:
  release:
    types: [published]

permissions:
  contents: read
  packages: write
  id-token: write
  pull-requests: read

jobs:
  build:
    uses: calebsargeant/reusable-workflows/.github/workflows/docker-release.yaml@v1.9.2
    with:
      image_name: backend
      platforms: linux/amd64
      push: true
    secrets: inherit
